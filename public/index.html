<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="icon" href="<%= BASE_URL %>favicon.ico">
    <title>Chester Devs PWA</title>
  </head>
  <body>
    <noscript>
      <strong>We're sorry but src doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
    </noscript>
    <div id="app"></div>
    <!-- built files will be auto injected -->
    <script>
      if (navigator.serviceWorker.controller) {
        var url = navigator.serviceWorker.controller.scriptURL;
        console.log('serviceWorker.controller', url);
      } else {
        navigator.serviceWorker.register('serviceworker.js', {
          scope: './'
        }).then(function(registration) {
          console.log('Refresh to allow ServiceWorker to control this client', 'onload');
        });
      }

      navigator.serviceWorker.addEventListener('controllerchange', function() {
        var scriptURL = navigator.serviceWorker.controller.scriptURL;
        console.log('serviceWorker.onControllerchange', scriptURL);
      });

      navigator.serviceWorker.ready.then(function(registration) {
        registration.update().then(function() {
          console.log('Checked for update');
        }).catch(function(error) {
          console.error('Update failed', error);
        });
      });

    </script>
  </body>
</html>
